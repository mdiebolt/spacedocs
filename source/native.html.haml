<!doctype html>
%html
  %head
    %meta(charset="utf-8")
    %meta(content="IE=edge,chrome=1" http-equiv="X-UA-Compatible")

    %title Spacedocs

    %link(href="/stylesheets/docs.css" media="screen, projection" rel="stylesheet" type="text/css")
    %script(src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript")
    %script(src="/javascripts/docs.js" type="text/javascript")

  %body
    = partial('nav.html.haml', { doc_json: doc_json })
    = partial('method_list.html.haml', { doc_json: doc_json })
    .documentation
      - name = nil
      - parent_class = nil

      - (native_json['tags']).each do |tag|
        - if tag['type'] == 'name'
          - name = tag['string']
        - if tag['type'] == 'methodOf'
          - parent_class = tag['string']

      %h1= "#{parent_class}#{name}(#{signature(native_json)})"
      .description
        %section.summary
          %p= native_json['description']['summary']

        %section.usage
          %h3 Usage
          %p= native_json['description']['body']

        - if (params = param_list(native_json)).length > 0
          %section.parameters
            %h3 Parameters
            %ul
              - param_list(native_json).each do |param|
                %li
                  %span.param_name= param[:name]
                  = " - "
                  %span.param_description= param[:description]

        %section.returns
          %h3 Returns
          - native_json['tags'].each do |tag|
            - if tag['type'] == 'returns'
              %p
                %span.type
                  %p
                    Type:
                    %a(href='#')= (tag['string']).split(" ").first.gsub(/[{}]/, '')
                %p.return_description= (tag['string']).split(" ")[1..-1].join " "

        %section.source
          %h3
            Source
          %a.toggle_source Toggle
          %pre
            %code
              = native_json['code']
